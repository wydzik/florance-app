{% extends "base.html" %}
{% block content %}

<h2>Rejestracja florysty</h2>

<form method="post" enctype="multipart/form-data" class="card p-4 shadow-sm">
  {% csrf_token %}

  <h5 class="mb-3">Dane logowania</h5>

  <div class="mb-3">
    <label class="form-label">Nazwa uÅ¼ytkownika</label>
    {{ form.username }}
    {{ form.username.errors }}
  </div>

  <div class="mb-3">
    <label class="form-label">Email</label>
    {{ form.email }}
    {{ form.email.errors }}
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
  <label class="form-label">HasÅ‚o</label>

  <div class="input-group">
    {{ form.password }}
    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
      ğŸ‘
    </button>
  </div>

  <div id="passwordHelp" class="form-text">
    HasÅ‚o musi speÅ‚niaÄ‡ wymagania
  </div>

  {{ form.password.errors }}
</div>



    <div class="col-md-6 mb-3">
      <label class="form-label">PowtÃ³rz hasÅ‚o</label>
      {{ form.password2 }}
      {{ form.password2.errors }}
    </div>
  </div>

  <hr>

  <h5>Dane osobowe</h5>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">ImiÄ™</label>
      {{ form.imie }}
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">Nazwisko</label>
      {{ form.nazwisko }}
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">Miasto</label>
      {{ form.lokalizacja_miasto }}
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">WojewÃ³dztwo</label>
      {{ form.lokalizacja_wojewodztwo }}
    </div>
  </div>

  <hr>

  <h5>Forma wspÃ³Å‚pracy</h5>
  <div class="form-check">
    {{ form.czy_freelancuje }}
    <label class="form-check-label">Freelancer</label>
  </div>
  <div class="form-check">
    {{ form.czy_pracownia }}
    <label class="form-check-label">Pracownia</label>
  </div>

  <hr>

  <h5>UmiejÄ™tnoÅ›ci i dostÄ™pnoÅ›Ä‡</h5>
  <div class="form-check">{{ form.czy_uklada_kwiaty }} UkÅ‚adam kwiaty</div>
  <div class="form-check">{{ form.czy_moze_dzwigac }} MogÄ™ dÅºwigaÄ‡</div>
  <div class="form-check">{{ form.czy_pracuje_na_wysokosci }} PracujÄ™ na wysokoÅ›ci</div>

  <hr>

  <h5>Uprawnienia</h5>
  <div class="form-check">{{ form.czy_prawo_jazdy_b }} Prawo jazdy B</div>
  <div class="form-check">{{ form.czy_prawo_jazdy_c }} Prawo jazdy C</div>
  <div class="form-check">{{ form.czy_ma_auto }} Mam wÅ‚asne auto</div>

  <div class="mt-4">
    <button class="btn btn-success">Zarejestruj siÄ™</button>
    <a href="{% url 'login' %}" class="btn btn-secondary">Mam juÅ¼ konto</a>
  </div>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const passwordInput = document.getElementById("id_password");
  const help = document.getElementById("passwordHelp");

  const rules = [
    { regex: /.{8,}/, text: "Minimum 8 znakÃ³w" },
    { regex: /[A-Z]/, text: "Co najmniej jedna wielka litera" },
    { regex: /[a-z]/, text: "Co najmniej jedna maÅ‚a litera" },
    { regex: /\d/, text: "Co najmniej jedna cyfra" },
  ];

  function updateHelp() {
    const value = passwordInput.value;

    help.innerHTML = rules.map(rule => {
      const ok = rule.regex.test(value);
      return `<div class="${ok ? 'text-success' : 'text-muted'}">
        ${ok ? 'âœ”ï¸' : 'â€¢'} ${rule.text}
      </div>`;
    }).join("");
  }

  passwordInput.addEventListener("input", updateHelp);
});

const toggleBtn = document.getElementById("togglePassword");

toggleBtn.addEventListener("click", function () {
  if (passwordInput.type === "password") {
    passwordInput.type = "text";
    toggleBtn.textContent = "ğŸ™ˆ";
  } else {
    passwordInput.type = "password";
    toggleBtn.textContent = "ğŸ‘";
  }
});

</script>


{% endblock %}
